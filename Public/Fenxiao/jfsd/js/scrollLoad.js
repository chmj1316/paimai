/*!
 * M.YS.COM v0.0.0
 * Copyright 2015
 * Author burning <iburning@live.cn>
 */
var CIScrollLoad=function(a){var b=this;b.wrap=null,b.content=null,b.lead=100,b.isEnd=!1,b.isLoading=!1,b.loader=null,b.loadType="get",b.loadApi="",b.loadData={},b.beforeLoad=null,b.afterLoad=null,a&&b.init(a)};CIScrollLoad.prototype.init=function(a){var b=this;return b.wrap=a.wrap||b.wrap,b.content=a.content||b.content,b.lead=a.lead||b.lead,"boolean"==typeof a.isEnd&&(b.isEnd=a.isEnd),"boolean"==typeof a.isLoading&&(b.isLoading=a.isLoading),b.loadType=a.loadType||b.loadType,b.loadApi=a.loadApi||b.loadApi,b.loadApi?(b.loadData=a.loadData||b.loadData,b.beforeLoad=a.beforeLoad||b.beforeLoad,b.afterLoad=a.afterLoad||b.afterLoad,"function"!=typeof b.afterLoad?void console.error("ScrollLoad.afterLoad",typeof b.afterLoad):(b.loader=window.CIAjax||$.ajax,"function"!=typeof b.loader?void console.error("ScrollLoad.loader",typeof b.loader):void b._bindEvent())):void console.error("ScrollLoad.loadApi",typeof b.loadApi)},CIScrollLoad.prototype._bindEvent=function(){var a=this;a.wrap.on("scroll",function(b){var c=a.content.height()-a.wrap.scrollTop()-a.wrap.height();c<=a.lead&&!a.isEnd&&!a.isLoading&&("function"==typeof a.beforeLoad&&a.beforeLoad(),a.load())})},CIScrollLoad.prototype.load=function(){var a=this;a.isLoading=!0,a.loader({type:a.loadType,url:a.loadApi,data:a.loadData,success:function(b){a.isLoading=!1,a.afterLoad(b)},error:function(a){console.error(a.status+" - "+a.statusText)}})};